# お知らせ更新ガイド（プレビューパネル用）

この拡張機能では、プレビューパネルに表示する最新のお知らせを `src/previewPanel.js` 内の `CURRENT_ANNOUNCEMENT` という設定で管理しています。以下の手順に従って内容を更新してください。

## 1. ファイルを開く
1. リポジトリを開きます。
2. `src/previewPanel.js` をエディタで開き、ファイル冒頭付近にある `CURRENT_ANNOUNCEMENT` というオブジェクトを探します。

```javascript
const CURRENT_ANNOUNCEMENT = {
  id: '2024052801',
  date: '2024.05.28',
  version: 'Version 1.3.0',
  subtitle: '新しいテンプレートが追加されました',
  body: [
    '…',
  ],
  actionLabel: '閉じる',
  imageSrc: 'images/Explanation.svg',
  defaultLang: 'ja',
  translations: {
    ja: {
      actionLabel: '閉じる',
    },
    en: {
      date: 'May 28, 2024',
      subtitle: 'New templates are now available',
      body: [
        '...',
      ],
      actionLabel: 'OK',
    },
  },
};
```

## 2. 内容を書き換える
- **id** … 新しいお知らせごとに「年月日＋通し番号」などの新しい文字列に更新します。これを変えることで、過去にお知らせを閉じた人にも再表示されます。
- **date** … 表示したい日付を入れます（例: `2024.06.01`）。
- **version** … 見出しとして表示したいタイトルを入れます（例: `Version 1.4.0`）。
- **subtitle** … 強調したいサブタイトルを入れます。
- **body** … 本文を配列で書きます。1 行につき 1 つの文字列です。複数行にしたい場合は要素を増やします。
- **actionLabel** … ボタンに表示する文言です。通常は `閉じる` で問題ありません。
- **imageSrc** … モーダル左側に表示する画像パスです。既存のアセットを指定してください。
- **defaultLang** … 基本言語（通常は `ja`）を指定します。`translations` のフォールバックにも使われます。
- **translations** … 言語コードごとに上書きしたい文言を指定します。未指定のフィールドは上記の基本値が使われます。

> 🔰 **ポイント**: 文字列はシングルクォート `'` で囲みます。改行したい場合は配列に新しい行を追加してください。

### 多言語対応の更新について
- 日本語以外の言語で表示したい内容があれば、`translations` に該当する言語コード（例: `en`, `zh-CN`）のオブジェクトを追加し、必要なキーだけを上書きしてください。
- 例: 英語だけ本文を差し替えたい場合は `body` を、ボタンの文言を変えたい場合は `actionLabel` を指定します。
- 新しい言語を追加したら、必要に応じて `defaultLang` の値も見直してください（未指定の場合は基本値がそのまま使われます）。

## 3. 保存して動作を確認
1. ファイルを保存します。
2. Chrome の拡張機能管理画面で拡張機能を再読み込み（リロード）します。
3. プレビューパネルを開き、新しいお知らせが自動で表示されることを確認します。
   - 一度閉じると同じ PC では再表示されません。
   - 誤って閉じた場合は、Chrome の「サイトデータの削除」や拡張のストレージを消去すると再度表示されます。

## 4. 変更を配布する
変更をリリースする場合は、通常どおり Git にコミットしてレビュー・デプロイの手順を進めてください。

---

### よくある質問
- **Q. 画像はどこで差し替えられますか？**  
  現在は `images/Explanation.svg` を読み込む仕様です。別の画像を使いたい場合は、このファイルを差し替えるか、コード内の画像パスを編集してください。

- **Q. 過去のお知らせが再表示されることはありますか？**  
  ありません。`id` を変えると新しいお知らせとして扱われ、同じ `id` のままなら閉じたユーザーには再表示されません。

- **Q. テキストを太字にするには？**  
  文章中で `<strong>太字</strong>` のように HTML タグを使うことも可能です。ただし過度な装飾は避けてください。
